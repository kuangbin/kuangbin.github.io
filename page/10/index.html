<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">






  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-flash.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.3.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.3.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.3.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.3.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.3.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":false},
    fancybox: true,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="kuangbin的博客">
<meta property="og:url" content="http://kuangbin.github.io/page/10/index.html">
<meta property="og:site_name" content="kuangbin的博客">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kuangbin的博客">



  <link rel="alternate" href="/atom.xml" title="kuangbin的博客" type="application/atom+xml" />




  <link rel="canonical" href="http://kuangbin.github.io/page/10/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>kuangbin的博客</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>
	
	<a href="https://github.com/kuangbin"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png" alt="Fork me on GitHub"></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kuangbin的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />关于</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-catalogue">
    <a href="/catalogue/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />目录</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/05/hdu4912/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/05/hdu4912/" itemprop="url">
                  HDU 4912 Paths on the tree （LCA+贪心）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-05 20:29:48" itemprop="dateCreated datePublished" datetime="2014-08-05T20:29:48+08:00">2014-08-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/图论/" itemprop="url" rel="index"><span itemprop="name">图论</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/图论/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4912"><a href="#HDU-4912" class="headerlink" title="HDU 4912"></a>HDU 4912</h2><h1 id="Paths-on-the-tree"><a href="#Paths-on-the-tree" class="headerlink" title="Paths on the tree"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4912" target="_blank" rel="noopener">Paths on the tree</a></h1><h1 id="Paths-on-the-tree-1"><a href="#Paths-on-the-tree-1" class="headerlink" title="Paths on the tree"></a>Paths on the tree</h1><p><strong>Time Limit: 4000/2000 MS (Java/Others)    Memory Limit: 131072/131072 K (Java/Others) Total Submission(s): 80    Accepted Submission(s): 25</strong>  </p>
<p>Problem Description</p>
<p>bobo has a tree, whose vertices are conveniently labeled by 1,2,…,n. There are m paths on the tree. bobo would like to pick some paths while any two paths do not share common vertices. Find the maximum number of paths bobo can pick.</p>
<p>Input</p>
<p>The input consists of several tests. For each tests: The first line contains n,m (1≤n,m≤105). Each of the following (n - 1) lines contain 2 integers ai,bi denoting an edge between vertices ai and bi (1≤ai,bi≤n). Each of the following m lines contain 2 integers ui,vi denoting a path between vertices ui and vi (1≤ui,vi≤n).</p>
<p>Output</p>
<p>For each tests: A single integer, the maximum number of paths.</p>
<p>Sample Input</p>
<p>3 2 1 2 1 3 1 2 1 3 7 3 1 2 1 3 2 4 2 5 3 6 3 7 2 3 4 5 6 7</p>
<p>Sample Output</p>
<p>1 2</p>
<p>Author</p>
<p>Xiaoxu Guo (ftiasch)</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2014%20Multi-University%20Training%20Contest%205&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">2014 Multi-University Training Contest 5</a></p>
<pre><code>随便选择一个根。变成有根树。
</code></pre><h3 id="然后每个路径，u-v-找出u-v的LCA。"><a href="#然后每个路径，u-v-找出u-v的LCA。" class="headerlink" title="然后每个路径，u - v  找出u - v的LCA。"></a>然后每个路径，u - v  找出u - v的LCA。</h3><p>根据所有路径的LCA的深度进行选择。 每选择一个路径以后，把LCA下面的子树都进行标记。 如果u,v没有被标记，这个路径是可以的。   贪心的正确性很容易想明白。</p>
<p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/5 19:37:30<br>File Name     :E:\2014ACM\比赛\2014多校训练\2014多校5\HDU4912.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>const int MAXN = 100010;<br>const int DEG = 20;<br>struct Edge<br>{<br>    int to,next;<br>}edge[MAXN*2];<br>int head[MAXN],tot;<br>void init()<br>{<br>    tot = 0;<br>    memset(head,-1,sizeof(head));<br>}<br>void addedge(int u,int v)<br>{<br>    edge[tot].to = v;<br>    edge[tot].next = head[u];<br>    head[u] = tot++;<br>}<br>int fa[MAXN][DEG];<br>int deg[MAXN];<br>void BFS(int root)<br>{<br>    queue<int>q;<br>    deg[root] = 0;<br>    fa[root][0] = root;<br>    q.push(root);<br>    while(!q.empty())<br>    {<br>        int u = q.front();<br>        q.pop();<br>        for(int i = 1;i &lt; DEG;i++)<br>            fa[u][i] = fa[fa[u][i-1]][i-1];<br>        for(int i = head[u];i != -1;i = edge[i].next)<br>        {<br>            int v = edge[i].to;<br>            if(v == fa[u][0])continue;<br>            deg[v] = deg[u] + 1;<br>            fa[v][0] = u;<br>            q.push(v);<br>        }<br>    }<br>}<br>int LCA(int u,int v)<br>{<br>    if(deg[u] &gt; deg[v])swap(u,v);<br>    int hu = deg[u], hv = deg[v];<br>    int tu = u, tv = v;<br>    for(int det = hv-hu,i=0;det;det&gt;&gt;=1,i++)<br>        if(det&amp;1)<br>            tv = fa[tv][i];<br>    if(tu == tv)return tu;<br>    for(int i = DEG-1;i &gt;= 0;i–)<br>    {<br>        if(fa[tu][i] == fa[tv][i])continue;<br>        tu = fa[tu][i];<br>        tv = fa[tv][i];<br>    }<br>    return fa[tu][0];<br>}<br>bool vis[MAXN];<br>void gao(int u)<br>{<br>    if(vis[u])return;<br>    vis[u] = true;<br>    for(int i = head[u];i != -1;i = edge[i].next)<br>    {<br>        int v = edge[i].to;<br>        if(v == fa[u][0])continue;<br>        gao(v);<br>    }<br>}<br>struct Node<br>{<br>    int u,v;<br>    int lca;<br>}node[MAXN];<br>bool cmp(Node a,Node b)<br>{<br>    return deg[a.lca] &gt; deg[b.lca];<br>}</int></p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int n,m;<br>    while(scanf(“%d%d”,&amp;n,&amp;m) == 2)<br>    {<br>        init();<br>        int u,v;<br>        for(int i = 1;i &lt; n;i++)<br>        {<br>            scanf(“%d%d”,&amp;u,&amp;v);<br>            addedge(u,v);<br>            addedge(v,u);<br>        }<br>        BFS(1);<br>        for(int i = 0;i &lt; m;i++)<br>        {<br>            scanf(“%d%d”,&amp;node[i].u,&amp;node[i].v);<br>            if(deg[node[i].u] &gt; deg[node[i].v])<br>                swap(node[i].u,node[i].v);<br>            node[i].lca = LCA(node[i].u,node[i].v);<br>        }<br>        sort(node,node+m,cmp);<br>        int ans = 0;<br>        memset(vis,false,sizeof(vis));<br>        for(int i = 0;i &lt; m;i++)<br>        {<br>            if(vis[node[i].u] || vis[node[i].v])continue;<br>            ans++;<br>            gao(node[i].lca);<br>        }<br>        printf(“%d\n”,ans);<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/05/hdu4913/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/05/hdu4913/" itemprop="url">
                  HDU 4913 Least common multiple （线段树）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-05 19:31:49" itemprop="dateCreated datePublished" datetime="2014-08-05T19:31:49+08:00">2014-08-05</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/数据结构/线段树/" itemprop="url" rel="index"><span itemprop="name">线段树</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4913"><a href="#HDU-4913" class="headerlink" title="HDU 4913"></a>HDU 4913</h2><h1 id="Least-common-multiple"><a href="#Least-common-multiple" class="headerlink" title="Least common multiple"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4913" target="_blank" rel="noopener">Least common multiple</a></h1><h1 id="Least-common-multiple-1"><a href="#Least-common-multiple-1" class="headerlink" title="Least common multiple"></a>Least common multiple</h1><p><strong>Time Limit: 6000/3000 MS (Java/Others)    Memory Limit: 131072/131072 K (Java/Others) Total Submission(s): 61    Accepted Submission(s): 17</strong>  </p>
<p>Problem Description</p>
<p>bobo has an integer set S={x1,x2,…,xn}, where xi=2ai * 3bi.For each non-empty subsets of S, bobo added the LCM (least common multiple) of the subset up. Find the sum of LCM modulo (109+7).</p>
<p>Input</p>
<p>The input consists of several tests. For each tests:The first line contains n (1≤n≤105). Each of the following n lines contain 2 integers ai,bi (0≤ai,bi≤109).</p>
<p>Output</p>
<p>For each tests:A single integer, the value of the sum.</p>
<p>Sample Input</p>
<p>2 0 1 1 0 3 1 2 2 1 1 2</p>
<p>Sample Output</p>
<p>11 174</p>
<p>Author</p>
<p>Xiaoxu Guo (ftiasch)</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2014%20Multi-University%20Training%20Contest%205&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">2014 Multi-University Training Contest 5</a></p>
<h3 id="题意很清楚，也很容易理解。LCM一定是2-i-3-j-的形式。"><a href="#题意很清楚，也很容易理解。LCM一定是2-i-3-j-的形式。" class="headerlink" title="题意很清楚，也很容易理解。LCM一定是2^i 3^j 的形式。"></a>题意很清楚，也很容易理解。LCM一定是2^i 3^j 的形式。</h3><h4 id="这题的关键是转化的过程，将问题转化为线段树解决。"><a href="#这题的关键是转化的过程，将问题转化为线段树解决。" class="headerlink" title="这题的关键是转化的过程，将问题转化为线段树解决。"></a>这题的关键是转化的过程，将问题转化为线段树解决。</h4><p>  最近状态真是差，写个线段树卡半天，写个几何也RE到现在。 早日退役保平安。   最简单的思路就是 就是假如要求LCM等于 2^a*3^b 的，假如需要求LCM为2^a*3^b 的有多少个，肯定是先找出LCM的2次数&lt;=a,3次数&lt;=b的， 然后减掉LCM比这个值小的。   我的做法就是把这些数先按照a从小到大，再按照b从小到大排序。 然后for一遍。枚举到i的时候， 比如第i个数是 \( 2^{a_i}*3^{b_i} \)    那么前面插入的数，2的指数是小于等于 \( a_i \)的。 这个时候先统计再前i 个数里面，包含了第i个数的子集对应的答案。  既然包含了\(2^{a_i}\) 那么LCM一定是包含\( 2^{a_i} \)的。 这样求和的话，其实是可以把这一项提取出来的。  假如在3的指数里面，&lt;=j的数有num[j]个。那么需要累加的就是 \[2^{a_i}*3^{j}<em>(2^{num[j]}-2^{num[j-1]}) \] 当然可以先把3的指数离散化一下，然后使用线段树进行维护。  需要的操作就是单点加值，区间乘以2，区间求和。 维护的就是  \( 3^{j} </em> (2^{num[j]} - 2^{num[j-1]}) \) 当然还有一些细节，比如查询哪个区间，修改哪个区间啥的。 具体看代码吧。  </p>
<p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/5 19:08:16<br>File Name     :E:\2014ACM\比赛\2014多校训练\2014多校5\HDU4913.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>const int MOD = 1e9+7;<br>const int MAXN = 100010;<br>struct Node<br>{<br>    int x,y;<br>    void input()<br>    {<br>        scanf(“%d%d”,&amp;x,&amp;y);<br>    }<br>}node[MAXN];<br>bool cmp(Node a,Node b)<br>{<br>    if(a.x != b.x)return a.x &lt; b.x;<br>    else return a.y &lt; b.y;<br>}<br>int tot;<br>int c[MAXN];<br>int lowbit(int x)<br>{<br>    return x&amp;(-x);<br>}<br>void add(int i,int val)<br>{<br>    while(i &lt;= tot)<br>    {<br>        c[i] += val;<br>        i += lowbit(i);<br>    }<br>}<br>int sum(int i)<br>{<br>    int s = 0;<br>    while(i)<br>    {<br>        s += c[i];<br>        i -= lowbit(i);<br>    }<br>    return s;<br>}</p>
<p>int b[MAXN];</p>
<p>long long pow_m(long long a,long long n)<br>{<br>    long long ret = 1;<br>    long long tmp = a;<br>    while(n)<br>    {<br>        if(n&amp;1)ret = ret<em>tmp%MOD;<br>        tmp = tmp</em>tmp%MOD;<br>        n &gt;&gt;= 1;<br>    }<br>    return ret;<br>}</p>
<p>struct SEGNODE<br>{<br>    int l,r;<br>    int val;<br>    long long sum;<br>    long long lazy;<br>}segTree[MAXN&lt;&lt;2];<br>void push_up(int i)<br>{<br>    segTree[i].sum = segTree[i&lt;&lt;1].sum + segTree[(i&lt;&lt;1)|1].sum;<br>    if(segTree[i].sum &gt;= MOD)segTree[i].sum -= MOD;<br>}<br>void Update(int i,int k )<br>{<br>    segTree[i].sum = segTree[i].sum<em>k%MOD;<br>    segTree[i].lazy = segTree[i].lazy</em>k%MOD;<br>}<br>void push_down(int i)<br>{<br>    if(segTree[i].lazy != 1)<br>    {<br>        Update(i&lt;&lt;1,segTree[i].lazy);<br>        Update((i&lt;&lt;1)|1,segTree[i].lazy);<br>        segTree[i].lazy = 1;<br>    }<br>}<br>void build(int i,int l,int r)<br>{<br>    segTree[i].l = l;<br>    segTree[i].r = r;<br>    segTree[i].sum = 0;<br>    segTree[i].lazy = 1;<br>    if(l == r)<br>    {<br>        segTree[i].val = pow_m(3,b[l]);<br>        return;<br>    }<br>    int mid = (l+r)/2;<br>    build(i&lt;&lt;1,l,mid);<br>    build((i&lt;&lt;1)|1,mid+1,r);<br>}<br>void ADD(int i,int k)<br>{<br>    if(segTree[i].l == k &amp;&amp; segTree[i].r == k)<br>    {<br>        int tmp = sum(k);<br>        segTree[i].sum += pow_m(2,tmp)*segTree[i].val%MOD;<br>        if(segTree[i].sum &gt;= MOD)segTree[i].sum-=MOD;<br>        add(k,1);<br>        return;<br>    }<br>    int mid = (segTree[i].l + segTree[i].r)/2;<br>    push_down(i);<br>    if(k &lt;= mid)ADD(i&lt;&lt;1,k);<br>    else ADD((i&lt;&lt;1)|1,k);<br>    push_up(i);<br>}<br>void CHANGE(int i,int l,int r)<br>{<br>    if(r &lt; l)return;<br>    if(segTree[i].l == l &amp;&amp; segTree[i].r == r)<br>    {<br>        Update(i,2);<br>        return;<br>    }<br>    int mid = (segTree[i].l + segTree[i].r)/2;<br>    push_down(i);<br>    if(r &lt;= mid)CHANGE(i&lt;&lt;1,l,r);<br>    else if(l &gt; mid)CHANGE((i&lt;&lt;1)|1,l,r);<br>    else<br>    {<br>        CHANGE(i&lt;&lt;1,l,mid);<br>        CHANGE((i&lt;&lt;1)|1,mid+1,r);<br>    }<br>    push_up(i);<br>}<br>long long sum(int i,int l,int r)<br>{<br>    if(segTree[i].l == l &amp;&amp; segTree[i].r == r)<br>        return segTree[i].sum;<br>    int mid = (segTree[i].l+segTree[i].r)/2;<br>    push_down(i);<br>    if(r &lt;= mid)return sum(i&lt;&lt;1,l,r);<br>    else if(l &gt; mid)return sum((i&lt;&lt;1)|1,l,r);<br>    else<br>    {<br>        return (sum(i&lt;&lt;1,l,mid)+sum((i&lt;&lt;1)|1,mid+1,r))%MOD;<br>    }<br>}</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int n;<br>    while(scanf(“%d”,&amp;n) == 1)<br>    {<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            node[i].input();<br>            b[i] = node[i].y;<br>        }<br>        sort(node,node+n,cmp);<br>        sort(b,b+n);<br>        tot = unique(b,b+n)-b;<br>        map&lt;int,int&gt;mp;<br>        for(int i = 0;i &lt; tot;i++)mp[b[i]] = i+1;<br>        for(int i = tot;i &gt; 0;i–)<br>            b[i] = b[i-1];<br>        memset(c,0,sizeof(c));<br>        long long ans = 0;<br>        build(1,1,tot);<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            int id = mp[node[i].y];<br>            long long tmp = pow_m(2,node[i].x);<br>            tmp = tmp <em> (sum(1,id,tot) + pow_m(3,node[i].y))%MOD;<br>            tmp = (tmp%MOD+MOD)%MOD;<br>            ans += tmp;<br>            if(ans &gt;= MOD)ans -= MOD;<br>            int nn = sum(id-1);<br>            ans += pow_m(2,node[i].x) </em> (pow_m(2,nn) - 1)%MOD*pow_m(3,node[i].y)%MOD;<br>            if(ans &gt;= MOD)ans -= MOD;<br>            ADD(1,id);<br>            CHANGE(1,id+1,tot);<br>        }<br>        printf(“%d\n”,(int)ans);<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/04/sgu110/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/04/sgu110/" itemprop="url">
                  SGU 110. Dungeon （三维几何）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-04 23:20:46" itemprop="dateCreated datePublished" datetime="2014-08-04T23:20:46+08:00">2014-08-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Online-Judge/SGU/" itemprop="url" rel="index"><span itemprop="name">SGU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Online-Judge/SGU/计算几何/" itemprop="url" rel="index"><span itemprop="name">计算几何</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="SGU-110-Dungeon"><a href="#SGU-110-Dungeon" class="headerlink" title="SGU 110 Dungeon"></a>SGU 110 <a href="http://acm.sgu.ru/problem.php?contest=0&amp;problem=110" target="_blank" rel="noopener">Dungeon</a></h2><p>  一些球体，给了一个光线，求光线反射的顺序。</p>
<p>110. Dungeon</p>
<p>time limit per test: 0.25 sec. memory limit per test: 4096 KB</p>
<p>The mission of space explorers found on planet M the vast dungeon. One of the dungeon halls is fill with the bright spheres. The explorers find out that the light rays reflect from the surface of the spheres according the ordinary law (the incidence angle is equal to the reflectance angle, the incidence ray, the reflected ray and the perpendicular to the sphere surface lay in the one plane). The ancient legend says that if the light ray will reflect from the spheres in the proper order, than the door to the room with very precious ancient knowledge will open. You are not to guess the right sequence; your task is much simpler. You are given the positions and the radii of the spheres, the place where the laser shot was made and the direction of light propagation. And you must find out the sequence in which the light will be reflected from the spheres.</p>
<p>Input</p>
<p>The first line of input contains the single integer n (1≤n≤50) - the amount of the spheres. The next n lines contain the coordinates and the radii of the spheres xi, yi, zi, ri (the integer numbers less or equal to 10000 by absolute value). The last line contains 6 real numbers - the coordinates of two points. The first one gives the coordinates of the place of laser shot, and the second gives the direction in which it was made (the second point is the point on the ray). The starting point of the ray lies strictly outside of any sphere.</p>
<p>Output</p>
<p>Your program must output the sequence of sphere numbers (spheres are numbers from 1 as they was given in input), from which the light ray was reflected. If the ray will reflect more the 10 times, than you must output first 10, then a space and the word ‘etc.’ (without quotes). Notice: if the light ray goes at a tangent to the sphere you must assume that the ray was reflected by the sphere.</p>
<p>Sample Input 1</p>
<p>1<br>0 0 2 1<br>0 0 0 0 0 1</p>
<p>Sample Output 1</p>
<p>1</p>
<p>Sample Input 2</p>
<p>2<br>0 0 2 1<br>0 0 -2 1<br>0 0 0 0 0 100</p>
<p>Sample Output 2</p>
<p>1 2 1 2 1 2 1 2 1 2 etc.</p>
<pre><code>按照点 和 方向向量去表示射线。 用参数方程去求解射线和球的交点，先找到一个最小的，然后进行反射。
</code></pre><p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/4 22:01:33<br>File Name     :E:\2014ACM\专题学习\计算几何\三维几何\SGU110.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>const double eps = 1e-8;<br>int sgn(double x)<br>{<br>    if(fabs(x) &lt; eps)return 0;<br>    if(x &lt; 0)return -1;<br>    else return 1;<br>}<br>struct Point3<br>{<br>    double x,y,z;<br>    Point3(double _x = 0,double _y = 0,double _z = 0)<br>    {<br>        x = _x;<br>        y = _y;<br>        z = _z;<br>    }<br>    void input()<br>    {<br>        scanf(“%lf%lf%lf”,&amp;x,&amp;y,&amp;z);<br>    }<br>    double len()<br>    {<br>        return sqrt(x*x+y*y+z<em>z);<br>    }<br>    double len2()<br>    {<br>        return x\</em>x+y*y+z<em>z;<br>    }<br>    double distance(const Point3 &amp;b)const<br>    {<br>        return sqrt((x-b.x)</em>(x-b.x)+(y-b.y)<em>(y-b.y)+(z-b.z)</em>(z-b.z));<br>    }<br>    Point3 operator -(const Point3 &amp;b)const<br>    {<br>        return Point3(x-b.x,y-b.y,z-b.z);<br>    }<br>    Point3 operator +(const Point3 &amp;b)const<br>    {<br>        return Point3(x+b.x,y+b.y,z+b.z);<br>    }<br>    Point3 operator <em>(const double &amp;k)const<br>    {<br>        return Point3(x\</em>k,y*k,z<em>k);<br>    }<br>    Point3 operator /(const double &amp;k)const<br>    {<br>        return Point3(x/k,y/k,z/k);<br>    }<br>    double operator </em>(const Point3 &amp;b)const<br>    {<br>        return x*b.x+y*b.y+z<em>b.z;<br>    }<br>    Point3 operator ^(const Point3 &amp;b)const<br>    {<br>        return Point3(y\</em>b.z-z*b.y,z*b.x+x*b.z,x*b.y-y*b.x);<br>    }<br>};<br>//球体<br>struct Sphere<br>{<br>    Point3 o;<br>    double r;<br>    void input()<br>    {<br>        o.input();<br>        scanf(“%lf”,&amp;r);<br>    }<br>};<br>//射线和球求交点<br>bool Intersaction(Point3 st,Point3 dir,Sphere sp,double &amp;t)<br>{<br>    double a = dir.x*dir.x + dir.y*dir.y + dir.z<em>dir.z;<br>    double b = 2</em>(st.x-sp.o.x)*dir.x + 2*(st.y-sp.o.y)*dir.y + 2*(st.z-sp.o.z)<em>dir.z;<br>    double c = (st.x-sp.o.x)</em>(st.x-sp.o.x) + (st.y-sp.o.y)<em>(st.y-sp.o.y) +<br>        (st.z-sp.o.z)</em>(st.z-sp.o.z) - sp.r<em>sp.r;<br>    double deta = b\</em>b - 4*a<em>c;<br>    if(sgn(deta) &lt; 0)return false;<br>    double x1 = (-b-sqrt(deta))/(2</em>a);<br>    double x2 = (-b+sqrt(deta))/(2<em>a);<br>    if(x1 &gt; x2)swap(x1,x2);<br>    if(sgn(x1) &lt;= 0)return false;<br>    t = x1;<br>    return true;<br>}<br>Point3 Ref(Point3 st,Point3 p,Sphere sp)<br>{<br>    Point3 tp = sp.o + ( ((p-sp.o)</em>((p-sp.o)<em>(st-sp.o)))/((p-sp.o).len2()) );<br>    return Point3(2\</em>tp.x-st.x,2*tp.y-st.y,2*tp.z-st.z)-p;<br>}<br>Sphere sp[100];</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int n;<br>    while(scanf(“%d”,&amp;n) == 1)<br>    {<br>        for(int i = 0;i &lt; n;i++)sp[i].input();<br>        Point3 now,dir;<br>        now.input();<br>        dir.input();<br>        dir = dir - now;<br>        int last = -1;<br>        for(int i = 0;i &lt; 11;i++)<br>        {<br>            int id = -1;<br>            double mint = 1e300;<br>            for(int j = 0;j &lt; n;j++)<br>                if(j != last)<br>                {<br>                    double t;<br>                    if(Intersaction(now,dir,sp[j],t))<br>                        if(mint &gt; t)<br>                        {<br>                            id = j;<br>                            mint = t;<br>                        }<br>                }<br>            if(id != -1)<br>            {<br>                if(i == 10)<br>                {<br>                    printf(“ etc.\n”);<br>                    break;<br>                }<br>                if(i &gt; 0)printf(“ “);<br>                Point3 pp = now + (dir*mint);<br>                Point3 tmp = Ref(now,pp,sp[id]);<br>                now = pp;<br>                dir = tmp;<br>                printf(“%d”,id+1);<br>            }<br>            else<br>            {<br>                printf(“\n”);<br>                break;<br>            }<br>            last = id;<br>        }<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4908/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4908/" itemprop="url">
                  HDU 4908 BestCoder Sequence （水题）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 23:32:54" itemprop="dateCreated datePublished" datetime="2014-08-03T23:32:54+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HDU-4908"><a href="#HDU-4908" class="headerlink" title="HDU 4908"></a>HDU 4908</h1><h1 id="BestCoder-Sequence"><a href="#BestCoder-Sequence" class="headerlink" title="BestCoder Sequence"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4908" target="_blank" rel="noopener">BestCoder Sequence</a></h1><h1 id="BestCoder-Sequence-1"><a href="#BestCoder-Sequence-1" class="headerlink" title="BestCoder Sequence"></a>BestCoder Sequence</h1><p><strong>Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others) Total Submission(s): 113    Accepted Submission(s): 49</strong>  </p>
<p>Problem Description</p>
<p>Mr Potato is a coder. Mr Potato is the BestCoder. One night, an amazing sequence appeared in his dream. Length of this sequence is odd, the median number is M, and he named this sequence as <em>Bestcoder Sequence</em>. As the best coder, Mr potato has strong curiosity, he wonder the number of consecutive sub-sequences which are <em>bestcoder sequences</em> in a given permutation of 1 ~ N.</p>
<p>Input</p>
<p>Input contains multiple test cases. For each test case, there is a pair of integers N and M in the first line, and an permutation of 1 ~ N in the second line. <strong>[Technical Specification]</strong> 1. 1 &lt;= N &lt;= 40000 2. 1 &lt;= M &lt;= N</p>
<p>Output</p>
<p>For each case, you should output the number of consecutive sub-sequences which are the <em>Bestcoder Sequences</em>.</p>
<p>Sample Input</p>
<p>1 1 1 5 3 4 5 3 2 1</p>
<p>Sample Output</p>
<p>1 3</p>
<p><em>Hint</em></p>
<p>For the second case, {3},{5,3,2},{4,5,3,2,1} are Bestcoder Sequence.</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=BestCoder%20Round%20#3&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">BestCoder Round #3</a></p>
<pre><code>在一个1-N的全排列中。 找有多少个子串，这个子串的中位数是M, 这个串必须跨越M的位置。 然后需要大于M的个数等于小于M的个数。 一边统计，一边直接搞就可以了。
</code></pre><p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 19:07:52<br>File Name     :B.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>const int MAXN = 40010;</p>
<p>int a[MAXN];<br>int n,m;<br>int num[MAXN*2];<br>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    while(scanf(“%d%d”,&amp;n,&amp;m) == 2)<br>    {<br>        int id = -1;<br>        for(int i = 1;i &lt;= n;i++)<br>        {<br>            scanf(“%d”,&amp;a[i]);<br>            if(a[i] == m)<br>                id = i;<br>        }<br>        memset(num,0,sizeof(num));<br>        int s = 0;<br>        for(int i = id;i &gt;= 1;i–)<br>        {<br>            if(a[i] &gt; m)s++;<br>            else if(a[i] &lt; m)s–;<br>            num[s+40000]++;<br>        }<br>        int ans = 0;<br>        s = 0;<br>        for(int i = id;i &lt;= n;i++)<br>        {<br>            if(a[i] &lt; m)s++;<br>            else if(a[i] &gt; m)s–;<br>            ans += num[40000+s];<br>        }<br>        printf(“%d\n”,ans);<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4909/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4909/" itemprop="url">
                  HDU 4909 String
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 23:16:04" itemprop="dateCreated datePublished" datetime="2014-08-03T23:16:04+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4909"><a href="#HDU-4909" class="headerlink" title="HDU 4909"></a>HDU 4909</h2><h1 id="String"><a href="#String" class="headerlink" title="String"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4909" target="_blank" rel="noopener">String</a></h1><h1 id="String-1"><a href="#String-1" class="headerlink" title="String"></a>String</h1><p><strong>Time Limit: 4000/2000 MS (Java/Others)    Memory Limit: 524288/524288 K (Java/Others) Total Submission(s): 54    Accepted Submission(s): 13</strong>  </p>
<p>Problem Description</p>
<p>You hava a non-empty string which consists of lowercase English letters and may contain at most one ‘?’. Let’s choose non-empty substring G from S (it can be G = S). A substring of a string is a continuous subsequence of the string. if G contains ‘?’ then ‘?’ can be deleted or replaced by one of lowercase english letters. After that if each letter occurs even number of times in G then G is a good substring. Find number of all good substrings.</p>
<p>Input</p>
<p>The input consists of an integer T, followed by T lines, each containing a non-empty string. The length of the string doesn’t exceed 20000. <strong>[Technical Specification]</strong> 1 &lt;= T &lt;= 100</p>
<p>Output</p>
<p>For each test case, print a single integer which is the number of good substrings of a given string.</p>
<p>Sample Input</p>
<p>3 abc?ca aabbcc aaaaa</p>
<p>Sample Output</p>
<p>7 6 6</p>
<p><em>Hint</em></p>
<p>Good substrings of “abc?ca”: “?”, “c?”, “?c”, “c?c”, “bc?c”, “c?ca”, “abc?ca”</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=BestCoder%20Round%20#3&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">BestCoder Round #3</a></p>
<pre><code>因为最多只有一个?   两段可以的话，字母出现次数的奇偶性只能相等或者差1\. 用map 去映射出现次数，然后查找。   一个坑点导致了TLE, 还是对map 不够熟悉啊。 如果直接ans += mp\[s\],  会新加入好多无用点，s如果不在会直接插入的。 应该if(mp.count(s))ans += mp\[s\];  
</code></pre><p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 19:47:05<br>File Name     :C.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>int num[30];<br>char str[20010];</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int T;<br>    scanf(“%d”,&amp;T);<br>    while(T–)<br>    {<br>        scanf(“%s”,str);<br>        map&lt;int,int&gt;mp1;<br>        map&lt;int,int&gt;mp2;<br>        bool has = false;<br>        int n = strlen(str);<br>        has = false;<br>        mp1[0]++;<br>        memset(num,0,sizeof(num));<br>        int s = 0;<br>        int ans = 0;<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            if(str[i] != ‘?’)<br>            {<br>                s ^= (1&lt;&lt;(str[i]-‘a’));<br>            }<br>            else<br>            {<br>                has = true;<br>            }<br>            if(!has)<br>            {<br>                if(mp1.count(s))ans += mp1[s];<br>                mp1[s]++;<br>            }<br>            else<br>            {<br>                if(mp2.count(s))ans += mp2[s];<br>                if(mp1.count(s))ans += mp1[s];<br>                for(int j = 0;j &lt; 26;j++)<br>                    if(mp1.count(s^(1&lt;&lt;j)))<br>                    ans += mp1[s^(1&lt;&lt;j)];<br>                mp2[s]++;<br>            }<br>        }<br>        printf(“%d\n”,ans);<br>    }<br>    return 0;<br>}</p>
<p>  可以使用数组进行优化，空间换时间。</p>
<p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 19:47:05<br>File Name     :C.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>char str[20010];<br>short num1[1&lt;&lt;26];<br>short num2[1&lt;&lt;26];<br>int a[20010];</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int T;<br>    scanf(“%d”,&amp;T);<br>    while(T–)<br>    {<br>        scanf(“%s”,str);<br>        bool has = false;<br>        int n = strlen(str);<br>        num1[0]++;<br>        int s = 0;<br>        int ans = 0;<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            if(str[i] != ‘?’)<br>            {<br>                s ^= (1&lt;&lt;(str[i]-‘a’));<br>            }<br>            else<br>            {<br>                has = true;<br>            }<br>            a[i] = s;<br>            if(!has)<br>            {<br>                ans += num1[s];<br>                num1[s]++;<br>            }<br>            else<br>            {<br>                ans += num1[s];<br>                ans += num2[s];<br>                for(int j = 0;j &lt; 26;j++)<br>                    ans += num1[s^(1&lt;&lt;j)];<br>                num2[s]++;<br>            }<br>        }<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            if(num1[a[i]])num1[a[i]] = 0;<br>            if(num2[a[i]])num2[a[i]] = 0;<br>        }<br>        num1[0] = 0;<br>        printf(“%d\n”,ans);<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4910/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4910/" itemprop="url">
                  HDU 4910 Problem about GCD （数论）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 22:56:01" itemprop="dateCreated datePublished" datetime="2014-08-03T22:56:01+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数学题/" itemprop="url" rel="index"><span itemprop="name">数学题</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数学题/数论/" itemprop="url" rel="index"><span itemprop="name">数论</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/数学题/数论/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4910"><a href="#HDU-4910" class="headerlink" title="HDU 4910"></a>HDU 4910</h2><h1 id="Problem-about-GCD"><a href="#Problem-about-GCD" class="headerlink" title="Problem about GCD"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4910" target="_blank" rel="noopener">Problem about GCD</a></h1><h3 id="求小于等于-N-的与N互质的所有数的乘积mod-N"><a href="#求小于等于-N-的与N互质的所有数的乘积mod-N" class="headerlink" title="求小于等于 N 的与N互质的所有数的乘积mod N"></a>求小于等于 N 的与N互质的所有数的乘积mod N</h3><h1 id="Problem-about-GCD-1"><a href="#Problem-about-GCD-1" class="headerlink" title="Problem about GCD"></a>Problem about GCD</h1><p><strong>Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 32768/32768 K (Java/Others) Total Submission(s): 26    Accepted Submission(s): 6</strong>  </p>
<p>Problem Description</p>
<p>Given integer m. Find multiplication of all 1&lt;=a&lt;=m such gcd(a, m)=1 (coprime with m) modulo m.</p>
<p>Input</p>
<p>Input contains multiple tests, one test per line. Last line contains -1, it should be skipped.<strong>[Technical Specification]</strong> m &lt;= 10^18</p>
<p>Output</p>
<p>For each test please output result. One case per line. Less than 160 test cases.</p>
<p>Sample Input</p>
<p>1 2 3 4 5 -1</p>
<p>Sample Output</p>
<p>0 1 2 3 4</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=BestCoder%20Round%20#3&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">BestCoder Round #3</a></p>
<h4 id="很显然，需要找规律。-答案要么是N-1，要么是1"><a href="#很显然，需要找规律。-答案要么是N-1，要么是1" class="headerlink" title="很显然，需要找规律。 答案要么是N-1，要么是1."></a>很显然，需要找规律。 答案要么是N-1，要么是1.</h4><p>答案为N-1的情况是: 1 2 4 此外 如果 N!=4 &amp;&amp; N%4 == 0  答案是1 如果N为偶数，要求N/2 是 p^k的形式； 如果N为奇数，要求N是p^k的形式。</p>
<p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 19:24:03<br>File Name     :D.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;</p>
<p>/* *************************************************<br> * Miller_Rabin 算法进行素数测试<br> * 速度快，可以判断一个 &lt; 2^63 的数是不是素数<br> *<br> <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong>/</p>
<p>const int S = 20; //随机算法判定次数，一般8~10就够了</p>
<p>// 计算ret = (a*b)%c     a,b,c &lt; 2^63<br>long long mult_mod(long long a,long long b,long long c)<br>{<br>    a %= c;<br>    b %= c;<br>    long long ret = 0;<br>    long long tmp = a;<br>    while(b)<br>    {<br>        if(b &amp; 1)<br>        {<br>            ret += tmp;<br>            if(ret &gt; c)ret -= c;//直接取模慢很多<br>        }<br>        tmp &lt;&lt;= 1;<br>        if(tmp &gt; c)tmp -= c;<br>        b &gt;&gt;= 1;<br>    }<br>    return ret;<br>}</p>
<p>// 计算 ret = (a^n)%mod<br>long long pow_mod(long long a,long long n,long long mod)<br>{<br>     long long ret = 1;<br>     long long temp = a%mod;<br>     while(n)<br>     {<br>         if(n &amp; 1)ret = mult_mod(ret,temp,mod);<br>         temp = mult_mod(temp,temp,mod);<br>         n &gt;&gt;= 1;<br>     }<br>     return ret;<br>}</p>
<p>// 通过 a^(n-1)=1(mod n)来判断n是不是素数<br>// n-1 = x*2^t 中间使用二次判断<br>// 是合数返回true, 不一定是合数返回false<br>bool check(long long a,long long n,long long x,long long t)<br>{<br>     long long ret = pow_mod(a,x,n);<br>     long long last = ret;<br>     for(int i = 1;i &lt;= t;i++)<br>     {<br>         ret = mult_mod(ret,ret,n);<br>         if(ret == 1 &amp;&amp; last != 1 &amp;&amp; last != n-1)return true;//合数<br>         last = ret;<br>     }<br>     if(ret != 1)return true;<br>     else return false;<br>}<br>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>// Miller_Rabin算法<br>// 是素数返回true,(可能是伪素数)<br>// 不是素数返回false<br>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>bool Miller_Rabin(long long n)<br>{<br>     if( n &lt; 2)return false;<br>     if( n == 2)return true;<br>     if( (n&amp;1) == 0)return false;//偶数<br>     long long x = n - 1;<br>     long long t = 0;<br>     while( (x&amp;1)==0 ){x &gt;&gt;= 1; t++;}</p>
<pre><code>srand(time(NULL));/* *************** */

for(int i = 0;i &lt; S;i++)
{
    long long a  = rand()%(n-1) + 1;
    if( check(a,n,x,t) )
       return false;
}
return true;
</code></pre><p>}</p>
<p>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>// pollard_rho 算法进行质因素分解<br>//<br>//<br>//<strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>*</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>long long factor[100];//质因素分解结果（刚返回时时无序的）<br>int tol;//质因素的个数，编号0~tol-1</p>
<p>long long gcd(long long a,long long b)<br>{<br>     long long t;<br>     while(b)<br>     {<br>         t = a;<br>         a = b;<br>         b = t%b;<br>     }<br>     if(a &gt;= 0)return a;<br>     else return -a;<br>}</p>
<p> //找出一个因子<br>long long pollard_rho(long long x,long long c)<br>{<br>     long long i = 1, k = 2;<br>     srand(time(NULL));<br>     long long x0 = rand()%(x-1) + 1;<br>     long long y = x0;<br>     while(1)<br>     {<br>         i ++;<br>         x0 = (mult_mod(x0,x0,x) + c)%x;<br>         long long d = gcd(y - x0,x);<br>         if( d != 1 &amp;&amp; d != x)return d;<br>         if(y == x0)return x;<br>         if(i == k){y = x0; k += k;}<br>     }<br>}<br> //对 n进行素因子分解，存入factor. k设置为107左右即可<br>void findfac(long long n,int k)<br>{<br>     if(n == 1)return;<br>     if(Miller_Rabin(n))<br>     {<br>         factor[tol++] = n;<br>         return;<br>     }<br>     long long p = n;<br>     int c = k;<br>     while( p &gt;= n)<br>        p = pollard_rho(p,c–);//值变化，防止死循环k<br>     findfac(p,k);<br>     findfac(n/p,k);<br>}</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);</p>
<pre><code>long long n;
while(scanf(&quot;%I64d&quot;,&amp;n) == 1)
{
    if(n == -1)break;
    if(n &lt;= 1)
    {
        printf(&quot;0\\n&quot;);
        continue;
    }
    if(n == 1 || n == 2 || n == 4)
    {
        printf(&quot;%I64d\\n&quot;,n-1);
        continue;
    }
    if(n != 4 &amp;&amp; n % 4 == 0)
    {
        printf(&quot;1\\n&quot;);
        continue;
    }
    tol = 0;
    if(n%2 == 0)
    {
        findfac(n/2,107);
        sort(factor,factor+tol);
        bool flag = true;
        for(int i = 1;i &lt; tol;i++)
            if(factor\[i-1\] != factor\[i\])
            {
                flag = false;
                break;
            }
        if(flag)printf(&quot;%I64d\\n&quot;,n-1);
        else printf(&quot;1\\n&quot;);
    }
    else
    {
        findfac(n,107);
        sort(factor,factor+tol);
        bool flag = true;
        for(int i = 1;i &lt; tol;i++)
            if(factor\[i-1\] != factor\[i\])
            {
                flag = false;
                break;
            }
        if(flag)printf(&quot;%I64d\\n&quot;,n-1);
        else printf(&quot;1\\n&quot;);
    }
}
return 0;
</code></pre><p>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4893-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4893-2/" itemprop="url">
                  HDU 4893 Wow! Such Sequence! （水题）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 17:43:51" itemprop="dateCreated datePublished" datetime="2014-08-03T17:43:51+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4893"><a href="#HDU-4893" class="headerlink" title="HDU 4893"></a>HDU 4893</h2><h1 id="Wow-Such-Sequence"><a href="#Wow-Such-Sequence" class="headerlink" title="Wow! Such Sequence!"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4893" target="_blank" rel="noopener">Wow! Such Sequence!</a></h1><h1 id="Wow-Such-Sequence-1"><a href="#Wow-Such-Sequence-1" class="headerlink" title="Wow! Such Sequence!"></a>Wow! Such Sequence!</h1><p><strong>Time Limit: 10000/5000 MS (Java/Others)    Memory Limit: 65536/65536 K (Java/Others) Total Submission(s): 2407    Accepted Submission(s): 711</strong>  </p>
<p>Problem Description</p>
<p>Recently, Doge got a funny birthday present from his new friend, Protein Tiger from St. Beeze College. No, not cactuses. It’s a mysterious blackbox.After some research, Doge found that the box is maintaining a sequence an of n numbers internally, initially all numbers are zero, and there are THREE “operations”: 1.Add d to the k-th number of the sequence. 2.Query the sum of ai where l ≤ i ≤ r. 3.Change ai to the nearest Fibonacci number, where l ≤ i ≤ r. 4.Play sound “Chee-rio!”, a bit useless. Let F0 = 1,F1 = 1,Fibonacci number Fn is defined as Fn = Fn - 1 + Fn - 2 for n ≥ 2. Nearest Fibonacci number of number x means the smallest Fn where |Fn - x| is also smallest. Doge doesn’t believe the machine could respond each request in less than 10ms. Help Doge figure out the reason.</p>
<p>Input</p>
<p>Input contains several test cases, please process till EOF. For each test case, there will be one line containing two integers n, m. Next m lines, each line indicates a query:1 k d - “add” 2 l r - “query sum” 3 l r - “change to nearest Fibonacci” 1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000, |d| &lt; 231, all queries will be valid.</p>
<p>Output</p>
<p>For each Type 2 (“query sum”) operation, output one line containing an integer represent the answer of this query.</p>
<p>Sample Input</p>
<p>1 1 2 1 1 5 4 1 1 7 1 3 17 3 2 4 2 1 5</p>
<p>Sample Output</p>
<p>0 22</p>
<p>Author</p>
<p>Fudan University</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2014%20Multi-University%20Training%20Contest%203&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">2014 Multi-University Training Contest 3</a></p>
<pre><code>水题。 理解题意就可以了， int WA了，改成long long AC
</code></pre><p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 16:39:04<br>File Name     :E:\2014ACM\比赛\2014多校训练\2014多校3\HDU4891.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>char str[1010][10100];</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    int n;<br>    while(scanf(“%d”,&amp;n) == 1)<br>    {<br>        gets(str[0]);<br>        for(int i = 0;i &lt; n;i++)<br>            gets(str[i]);<br>        long long ans = 1;<br>        int c0 = 0, c1 = 0;<br>        int cnt0 = 0, cnt1 = 0;<br>        for(int i = 0;i &lt; n;i++)<br>        {<br>            if(ans &gt; 100000)break;<br>            int len = strlen(str[i]);<br>            for(int j = 0;j &lt; len;j++)<br>            {<br>                if(str[i][j] == ‘$’)<br>                {<br>                    if(c0 == 0)c0 = 1;<br>                    else<br>                    {<br>                        ans <em>= (cnt0+1);<br>                        cnt0 = 0;<br>                        c0 = 0;<br>                    }<br>                }<br>                if(str[i][j] == ‘{‘)<br>                    c1 = 1;<br>                if(str[i][j] == ‘}’)<br>                {<br>                    c1 = 0;<br>                    ans </em>= (cnt1+1);<br>                    cnt1 = 0;<br>                }<br>                if(c0 &gt; 0)<br>                {<br>                    if(str[i][j] == ‘ ‘)<br>                        cnt0++;<br>                    else<br>                    {<br>                        ans *= (cnt0+1);<br>                        cnt0 = 0;<br>                    }<br>                }<br>                if(c1 &gt; 0 &amp;&amp; str[i][j] == ‘|’)<br>                    cnt1++;<br>                if(ans &gt; 100000)break;<br>            }<br>        }<br>        if(ans &gt; 100000)printf(“doge\n”);<br>        else printf(“%d\n”,(int)ans);<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4893/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4893/" itemprop="url">
                  HDU 4893 Wow! Such Sequence! （线段树）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 15:48:37" itemprop="dateCreated datePublished" datetime="2014-08-03T15:48:37+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 13:43:28" itemprop="dateModified" datetime="2018-07-29T13:43:28+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/数据结构/" itemprop="url" rel="index"><span itemprop="name">数据结构</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/数据结构/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/Online-Judge/数据结构/算法/线段树/" itemprop="url" rel="index"><span itemprop="name">线段树</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4893"><a href="#HDU-4893" class="headerlink" title="HDU 4893"></a>HDU 4893</h2><h1 id="Wow-Such-Sequence"><a href="#Wow-Such-Sequence" class="headerlink" title="Wow! Such Sequence!"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4893" target="_blank" rel="noopener">Wow! Such Sequence!</a></h1><p>  线段树。 加个标记就可以了。</p>
<h1 id="Wow-Such-Sequence-1"><a href="#Wow-Such-Sequence-1" class="headerlink" title="Wow! Such Sequence!"></a>Wow! Such Sequence!</h1><p><strong>Time Limit: 10000/5000 MS (Java/Others)    Memory Limit: 65536/65536 K (Java/Others) Total Submission(s): 2403    Accepted Submission(s): 710</strong>  </p>
<p>Problem Description</p>
<p>Recently, Doge got a funny birthday present from his new friend, Protein Tiger from St. Beeze College. No, not cactuses. It’s a mysterious blackbox. After some research, Doge found that the box is maintaining a sequence an of n numbers internally, initially all numbers are zero, and there are THREE “operations”: 1.Add d to the k-th number of the sequence. 2.Query the sum of ai where l ≤ i ≤ r. 3.Change ai to the nearest Fibonacci number, where l ≤ i ≤ r. 4.Play sound “Chee-rio!”, a bit useless. Let F0 = 1,F1 = 1,Fibonacci number Fn is defined as Fn = Fn - 1 + Fn - 2 for n ≥ 2. Nearest Fibonacci number of number x means the smallest Fn where |Fn - x| is also smallest. Doge doesn’t believe the machine could respond each request in less than 10ms. Help Doge figure out the reason.</p>
<p>Input</p>
<p>Input contains several test cases, please process till EOF. For each test case, there will be one line containing two integers n, m. Next m lines, each line indicates a query: 1 k d - “add” 2 l r - “query sum” 3 l r - “change to nearest Fibonacci” 1 ≤ n ≤ 100000, 1 ≤ m ≤ 100000, |d| &lt; 231, all queries will be valid.</p>
<p>Output</p>
<p>For each Type 2 (“query sum”) operation, output one line containing an integer represent the answer of this query.</p>
<p>Sample Input</p>
<p>1 1 2 1 1 5 4 1 1 7 1 3 17 3 2 4 2 1 5</p>
<p>Sample Output</p>
<p>0 22</p>
<p>Author</p>
<p>Fudan University</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2014%20Multi-University%20Training%20Contest%203&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">2014 Multi-University Training Contest 3</a></p>
<pre><code>只需要使用线段树，加个懒得标记。 sum1表示当前的和，sum2表示当前最近的斐波那契数列的和。 然后直接搞就可以了。
</code></pre><p>/* <strong><strong><strong><strong><strong><strong><strong><strong><strong><strong><strong>***</strong></strong></strong></strong></strong></strong></strong></strong></strong></strong></strong><br>Author        :kuangbin<br>Created Time  :2014/8/3 15:06:42<br>File Name     :E:\2014ACM\比赛\2014多校训练\2014多校3\HDU4893.cpp<br>************************************************ */</p>
<p>#include &lt;stdio.h&gt;</p>
<p>#include &lt;string.h&gt;</p>
<p>#include <iostream></iostream></p>
<p>#include <algorithm></algorithm></p>
<p>#include <vector></vector></p>
<p>#include <queue></queue></p>
<p>#include <set></set></p>
<p>#include <map></map></p>
<p>#include <string></string></p>
<p>#include &lt;math.h&gt;</p>
<p>#include &lt;stdlib.h&gt;</p>
<p>#include &lt;time.h&gt;<br>using namespace std;<br>long long f[72];<br>const int MAXN = 100010;<br>struct Node<br>{<br>    int l,r;<br>    int lazy;<br>    long long sum1,sum2;<br>}segTree[MAXN&lt;&lt;2];<br>void Update(int i)<br>{<br>    segTree[i].sum1 = segTree[i].sum2;<br>    segTree[i].lazy = 1;<br>}<br>void push_up(int i)<br>{<br>    segTree[i].sum1 = segTree[i&lt;&lt;1].sum1 + segTree[(i&lt;&lt;1)|1].sum1;<br>    segTree[i].sum2 = segTree[i&lt;&lt;1].sum2 + segTree[(i&lt;&lt;1)|1].sum2;<br>}<br>void push_down(int i)<br>{<br>    if(segTree[i].lazy)<br>    {<br>        Update(i&lt;&lt;1);<br>        Update((i&lt;&lt;1)|1);<br>        segTree[i].lazy = 0;<br>    }<br>}<br>void build(int i,int l,int r)<br>{<br>    segTree[i].l = l;<br>    segTree[i].r = r;<br>    segTree[i].lazy = 0;<br>    if(l == r)<br>    {<br>        segTree[i].sum1 = 0;<br>        segTree[i].sum2 = 1;<br>        return;<br>    }<br>    int mid = (l+r)/2;<br>    build(i&lt;&lt;1,l,mid);<br>    build((i&lt;&lt;1)|1,mid+1,r);<br>    push_up(i);<br>}</p>
<p>void Add(int i,int k,int d)<br>{<br>    if(segTree[i].l == k &amp;&amp; segTree[i].r == k)<br>    {<br>        segTree[i].sum1 += d;<br>        int id = lower_bound(f,f+70,segTree[i].sum1) - f;<br>        segTree[i].sum2 = f[id];<br>        if(id &gt; 0)<br>        {<br>            if(segTree[i].sum1-f[id-1] &lt;= f[id]-segTree[i].sum1)<br>                segTree[i].sum2 = f[id-1];<br>        }<br>        return;<br>    }<br>    push_down(i);<br>    int mid = (segTree[i].l + segTree[i].r)/2;<br>    if(k &lt;= mid)Add(i&lt;&lt;1,k,d);<br>    else Add((i&lt;&lt;1)|1,k,d);<br>    push_up(i);<br>}<br>long long query(int i,int l,int r)<br>{<br>    if(segTree[i].l == l &amp;&amp; segTree[i].r == r)<br>        return segTree[i].sum1;<br>    push_down(i);<br>    int mid = (segTree[i].l + segTree[i].r)/2;<br>    if(r &lt;= mid)return query(i&lt;&lt;1,l,r);<br>    else if(l &gt; mid)return query((i&lt;&lt;1)|1,l,r);<br>    else return query(i&lt;&lt;1,l,mid) + query((i&lt;&lt;1)|1,mid+1,r);<br>}<br>void Change(int i,int l,int r)<br>{<br>    if(segTree[i].l == l &amp;&amp; segTree[i].r == r)<br>    {<br>        Update(i);<br>        return;<br>    }<br>    if(segTree[i].lazy)return;<br>    int mid = (segTree[i].l + segTree[i].r)/2;<br>    if(r &lt;= mid)Change(i&lt;&lt;1,l,r);<br>    else if(l &gt; mid)Change((i&lt;&lt;1)|1,l,r);<br>    else<br>    {<br>        Change(i&lt;&lt;1,l,mid);<br>        Change((i&lt;&lt;1)|1,mid+1,r);<br>    }<br>    push_up(i);<br>}</p>
<p>int main()<br>{<br>    //freopen(“in.txt”,”r”,stdin);<br>    //freopen(“out.txt”,”w”,stdout);<br>    f[0] = 1;<br>    f[1] = 1;<br>    for(int i = 2;i &lt; 70;i++)<br>    {<br>        f[i] = f[i-1]+f[i-2];<br>    }<br>    int n,m;<br>    while(scanf(“%d%d”,&amp;n,&amp;m) == 2)<br>    {<br>        build(1,1,n);<br>        int op;<br>        int l,r;<br>        while(m–)<br>        {<br>            scanf(“%d%d%d”,&amp;op,&amp;l,&amp;r);<br>            if(op == 1)Add(1,l,r);<br>            else if(op == 2)printf(“%I64d\n”,query(1,l,r));<br>            else Change(1,l,r);<br>        }<br>    }<br>    return 0;<br>}</p>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4889/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4889/" itemprop="url">
                  HDU 4889 Scary Path Finding Algorithm （构造）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 14:36:28" itemprop="dateCreated datePublished" datetime="2014-08-03T14:36:28+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 21:07:05" itemprop="dateModified" datetime="2018-07-29T21:07:05+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="HDU-4889"><a href="#HDU-4889" class="headerlink" title="HDU 4889"></a>HDU 4889</h1><h1 id="Scary-Path-Finding-Algorithm"><a href="#Scary-Path-Finding-Algorithm" class="headerlink" title="Scary Path Finding Algorithm"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4889" target="_blank" rel="noopener">Scary Path Finding Algorithm</a></h1><h1 id="Scary-Path-Finding-Algorithm-1"><a href="#Scary-Path-Finding-Algorithm-1" class="headerlink" title="Scary Path Finding Algorithm"></a>Scary Path Finding Algorithm</h1><p><strong>Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/65536 K (Java/Others) Total Submission(s): 268    Accepted Submission(s): 121 Special Judge</strong>  </p>
<p>Problem Description</p>
<p>Fackyyj loves the challenge phase in TwosigmaCrap(TC). One day, he meet a task asking him to find shortest path from vertex 1 to vertex n, in a graph with at most n vertices and m edges. (1 ≤ n ≤ 100,0 ≤ m ≤ n(n-1))Fackyyj solved this problem at first glance, after that he opened someone’s submission, spotted the following code: long long spfa_slf() { int n,m; cin &gt;&gt; n &gt;&gt; m; vector&lt;pair&lt;int,int&gt; &gt; edges[111]; for(int i = 0;i &lt; m;i++) { int x,y,w; cin &gt;&gt; x &gt;&gt; y &gt;&gt; w; edges[x].push_back(make_pair(y,w)); } deque<int> q; vector<long long=""> dist(n+1, ~0ULL&gt;&gt;1); vector<bool> inQueue(n+1, false); dist[1] = 0; q.push_back(1); inQueue[1] = true; int doge = 0; while(!q.empty()) { int x = q.front(); q.pop_front(); if(doge++ &gt; C) { puts(“doge”); return 233; } for(vector&lt;pair&lt;int,int&gt; &gt;::iterator it = edges[x].begin(); it != edges[x].end();++it) { int y = it-&gt;first; int w = it-&gt;second; if(dist[y] &gt; dist[x] + w) { dist[y] = dist[x] + w; if(!inQueue[y]) { inQueue[y] = true; if(!q.empty() &amp;&amp; dist[y] &gt; dist[q.front()]) q.push_back(y); else q.push_front(y); } } } inQueue[x] = false; } return dist[n]; } Fackyyj’s face lit up with an evil smile. He immediately clicked button “Challenge!”, but due to a hard disk failure, all of his test case generators were lost! Fackyyj had no interest on recreating his precise generators, so he asked you to write one. The generator should be able to generate a test case with at most 100 vertices, and it must be able to fail the above code, i.e. let the above code print “doge”. It should <strong>NOT</strong> contain any negative-cost loop. For those guys who doesn’t know C++, Fackyyj explain the general idea of the above algorithm by the following psuedo-code:</bool></long></int></p>
<p><img src="http://acm.hdu.edu.cn/data/images/C504-1003-1.jpg" alt=""></p>
<p>Input</p>
<p>Input contains several test cases, please process till EOF. For each test case, there will be a single line containing an integer C. It is the constant C in the above code. (C &lt;= 23333333)</p>
<p>Output</p>
<p>For each test case, on the first line, print two integers, n and m, indicating the number of vertices and the number of edges of your graph. Next m lines, on each line print <strong>x</strong> <strong>y</strong> <strong>w</strong>, means there is a road from x to y, cost w. 1 ≤ n ≤ 100,0 ≤ m ≤ n(n-1),|w| &lt; 231. Note that your output shouldn’t contain any negative-cost loop.</p>
<p>Sample Input</p>
<p>1</p>
<p>Sample Output</p>
<p>4 3 1 2 1 2 3 1 3 4 1</p>
<p>Author</p>
<p>Fudan University</p>
<p>Source</p>
<p><a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2014%20Multi-University%20Training%20Contest%203&amp;source=1&amp;searchmode=source" target="_blank" rel="noopener">2014 Multi-University Training Contest 3</a></p>
<pre><code>直接进行构造。
</code></pre><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ***************</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Author        :kuangbin</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Created Time  :2014/8/3 12:18:25</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">File Name     :E:\2014ACM\比赛\2014多校训练\2014多校3\HDU4889.cpp</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">************************************************ */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//freopen("in.txt","r",stdin);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//freopen("out.txt","w",stdout);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> C;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;C) == <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> n = <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> m = n*(n<span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>,n,m);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = i+<span class="number">1</span>;j &lt;= n;j++)</span><br><span class="line"></span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d %d %d\n"</span>,i,j,-(<span class="number">1</span>&lt;&lt;(n-i)));</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://kuangbin.github.io/2014/08/03/hdu4888/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="kuangbin">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/blogLogo.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kuangbin的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2014/08/03/hdu4888/" itemprop="url">
                  HDU 4888 Redraw Beautiful Drawings （最大流）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2014-08-03 14:34:52" itemprop="dateCreated datePublished" datetime="2014-08-03T14:34:52+08:00">2014-08-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-07-29 21:06:34" itemprop="dateModified" datetime="2018-07-29T21:06:34+08:00">2018-07-29</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Online-Judge/" itemprop="url" rel="index"><span itemprop="name">Online Judge</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/HDU/" itemprop="url" rel="index"><span itemprop="name">HDU</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/算法/" itemprop="url" rel="index"><span itemprop="name">算法</span></a></span>

                
                
                  ，
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/网络流/" itemprop="url" rel="index"><span itemprop="name">网络流</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="HDU-4888"><a href="#HDU-4888" class="headerlink" title="HDU 4888"></a>HDU 4888</h2><h1 id="Redraw-Beautiful-Drawings"><a href="#Redraw-Beautiful-Drawings" class="headerlink" title="Redraw Beautiful Drawings"></a><a href="http://acm.hdu.edu.cn/showproblem.php?pid=4888" target="_blank" rel="noopener">Redraw Beautiful Drawings</a></h1><h1 id="Redraw-Beautiful-Drawings-1"><a href="#Redraw-Beautiful-Drawings-1" class="headerlink" title="Redraw Beautiful Drawings"></a>Redraw Beautiful Drawings</h1><p><strong>Time Limit: 3000/1500 MS (Java/Others)    Memory Limit: 65536/65536 K (Java/Others) Total Submission(s): 1856    Accepted Submission(s): 415</strong>  </p>
<p>Problem Description</p>
<p>Alice and Bob are playing together. Alice is crazy about art and she has visited many museums around the world. She has a good memory and she can remember all drawings she has seen. Today Alice designs a game using these drawings in her memory. First, she matches K+1 colors appears in the picture to K+1 different integers(from 0 to K). After that, she slices the drawing into grids and there are N rows and M columns. Each grid has an integer on it(from 0 to K) representing the color on the corresponding position in the original drawing. Alice wants to share the wonderful drawings with Bob and she tells Bob the size of the drawing, the number of different colors, and the sum of integers on each row and each column. Bob has to redraw the drawing with Alice’s information. Unfortunately, somtimes, the information Alice offers is wrong because of Alice’s poor math. And sometimes, Bob can work out multiple different drawings using the information Alice provides. Bob gets confused and he needs your help. You have to tell Bob if Alice’s information is right and if her information is right you should also tell Bob whether he can get a unique drawing.</p>
<p>Input</p>
<p>The input contains mutiple testcases. For each testcase, the first line contains three integers N(1 ≤ N ≤ 400) , M(1 ≤ M ≤ 400) and K(1 ≤ K ≤ 40). N integers are given in the second line representing the sum of N rows. M integers are given in the third line representing the sum of M columns. The input is terminated by EOF.</p>
<p>Output</p>
<p>For each testcase, if there is no solution for Bob, output “Impossible” in one line(without the quotation mark); if there is only one solution for Bob, output “Unique” in one line(without the quotation mark) and output an N * M matrix in the following N lines representing Bob’s unique solution; if there are many ways for Bob to redraw the drawing, output “Not Unique” in one line(without the quotation mark).</p>
<p>Sample Input</p>
<p>2 2 4 4 2 4 2 4 2 2 2 2 5 0 5 4 1 4 3 9 1 2 3 3</p>
<p>Sample Output</p>
<p>Not Unique Impossible Unique 1 2 3 3</p>
<pre><code>用最大流去判断有没有解。 判断多解的话，在残余网络中看能不能找到长度大于2的环。  
</code></pre><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* ***************</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Author        :kuangbin</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">Created Time  :2014/8/3 13:06:32</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">File Name     :E:\2014ACM\比赛\2014多校训练\2014多校3\HDU4888.cpp</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">************************************************ */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;math.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXN = <span class="number">1010</span>;<span class="comment">//点数的最大值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> MAXM = <span class="number">400010</span>;<span class="comment">//边数的最大值</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> to,next,cap,flow;</span><br><span class="line"></span><br><span class="line">&#125;edge[MAXM];<span class="comment">//注意是MAXM</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> tol;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> head[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> gap[MAXN],dep[MAXN],pre[MAXN],cur[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	tol = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(head,<span class="number">-1</span>,<span class="keyword">sizeof</span>(head));</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//加边，单向图三个参数，双向图四个参数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addedge</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> v,<span class="keyword">int</span> w,<span class="keyword">int</span> rw=<span class="number">0</span>)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	edge[tol].to = v;edge[tol].cap = w;edge[tol].next = head[u];</span><br><span class="line"></span><br><span class="line">	edge[tol].flow = <span class="number">0</span>;head[u] = tol++;</span><br><span class="line"></span><br><span class="line">	edge[tol].to = u;edge[tol].cap = rw;edge[tol].next = head[v];</span><br><span class="line"></span><br><span class="line">	edge[tol].flow = <span class="number">0</span>;head[v]=tol++;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输入参数：起点、终点、点的总数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//点的编号没有影响，只要输入点的总数</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sap</span><span class="params">(<span class="keyword">int</span> start,<span class="keyword">int</span> end,<span class="keyword">int</span> N)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(gap,<span class="number">0</span>,<span class="keyword">sizeof</span>(gap));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memset</span>(dep,<span class="number">0</span>,<span class="keyword">sizeof</span>(dep));</span><br><span class="line"></span><br><span class="line">	<span class="built_in">memcpy</span>(cur,head,<span class="keyword">sizeof</span>(head));</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> u = start;</span><br><span class="line"></span><br><span class="line">	pre[u] = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line">	gap[<span class="number">0</span>] = N;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(dep[start] &lt; N)</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(u == end)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> Min = INF;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = pre[u];i != <span class="number">-1</span>; i = pre[edge[i^<span class="number">1</span>].to])</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(Min &gt; edge[i].cap - edge[i].flow)</span><br><span class="line"></span><br><span class="line">                        Min = edge[i].cap - edge[i].flow;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> i = pre[u];i != <span class="number">-1</span>; i = pre[edge[i^<span class="number">1</span>].to])</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                edge[i].flow += Min;</span><br><span class="line"></span><br><span class="line">                edge[i^<span class="number">1</span>].flow -= Min;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            u = start;</span><br><span class="line"></span><br><span class="line">            ans += Min;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> v;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = cur[u]; i != <span class="number">-1</span>;i = edge[i].next)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            v = edge[i].to;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(edge[i].cap - edge[i].flow &amp;&amp; dep[v]+<span class="number">1</span> == dep[u])</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">                cur[u] = pre[v] = i;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(flag)</span><br><span class="line"></span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            u = v;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> Min = N;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = head[u]; i != <span class="number">-1</span>;i = edge[i].next)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(edge[i].cap - edge[i].flow &amp;&amp; dep[edge[i].to] &lt; Min)</span><br><span class="line"></span><br><span class="line">            &#123;</span><br><span class="line"></span><br><span class="line">                Min = dep[edge[i].to];</span><br><span class="line"></span><br><span class="line">                cur[u] = i;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        gap[dep[u]]--;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!gap[dep[u]])<span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">        dep[u] = Min+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        gap[dep[u]]++;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(u != start) u = edge[pre[u]^<span class="number">1</span>].to;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> ans;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">500</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> b[<span class="number">500</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> id[<span class="number">500</span>][<span class="number">500</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> vis[MAXN];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> u,<span class="keyword">int</span> pre)</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//printf("%d %d\n",pre,u);</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span>(vis[u])<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	vis[u] = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">int</span> i = head[u];i != <span class="number">-1</span>;i = edge[i].next)</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> v = edge[i].to;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(edge[i].cap &lt;= edge[i].flow)<span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(v == pre)<span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(dfs(v,u))<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    vis\[u\] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//freopen("in.txt","r",stdin);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//freopen("out.txt","w",stdout);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> n,m,K;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">while</span>(<span class="built_in">scanf</span>(<span class="string">"%d%d%d"</span>,&amp;n,&amp;m,&amp;K) == <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">	&#123;</span><br><span class="line"></span><br><span class="line">		init();</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> sum1 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;a[i]);</span><br><span class="line"></span><br><span class="line">			sum1 += a[i];</span><br><span class="line"></span><br><span class="line">			addedge(<span class="number">0</span>,i,a[i]);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> sum2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= m;i++)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;b[i]);</span><br><span class="line"></span><br><span class="line">			sum2 += b[i];</span><br><span class="line"></span><br><span class="line">			addedge(i+n,n+m+<span class="number">1</span>,b[i]);</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(sum1 != sum2)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j &lt;= m;j++)</span><br><span class="line"></span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				id[i][j] = tol;</span><br><span class="line"></span><br><span class="line">				addedge(i,j+n,K);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">int</span> tmp = sap(<span class="number">0</span>,n+m+<span class="number">1</span>,n+m+<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(tmp != sum1)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Impossible\n"</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">memset</span>(vis,<span class="literal">false</span>,<span class="keyword">sizeof</span>(vis));</span><br><span class="line"></span><br><span class="line">		<span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">if</span>(dfs(i,i))</span><br><span class="line"></span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">				<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span>(flag)</span><br><span class="line"></span><br><span class="line">		&#123;</span><br><span class="line"></span><br><span class="line">			<span class="built_in">printf</span>(<span class="string">"Not Unique\n"</span>);</span><br><span class="line"></span><br><span class="line">			<span class="keyword">continue</span>;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">"Unique\n"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>;i &lt;= n;i++)</span><br><span class="line"></span><br><span class="line">			<span class="keyword">for</span>(<span class="keyword">int</span> j = <span class="number">1</span>;j &lt;= m;j++)</span><br><span class="line"></span><br><span class="line">			&#123;</span><br><span class="line"></span><br><span class="line">				<span class="built_in">printf</span>(<span class="string">"%d"</span>,edge[id[i][j]].flow);</span><br><span class="line"></span><br><span class="line">				<span class="keyword">if</span>(j &lt; m)<span class="built_in">printf</span>(<span class="string">" "</span>);</span><br><span class="line"></span><br><span class="line">				<span class="keyword">else</span> <span class="built_in">printf</span>(<span class="string">"\n"</span>);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    
	
	<div>
		
	</div>
 
	<div>
      
	</div>

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/9/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><span class="page-number current">10</span><a class="page-number" href="/page/11/">11</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/">13</a><a class="extend next" rel="next" href="/page/11/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/blogLogo.jpg"
                alt="kuangbin" />
            
              <p class="site-author-name" itemprop="name">kuangbin</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">127</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">150</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">53</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/kuangbin" target="_blank" title="GitHub"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.linkedin.com/in/kuangbin/" target="_blank" title="Linkedin"><i class="fa fa-fw fa-globe"></i>Linkedin</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:kuangbin2009@126.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.zhihu.com/people/kuang-bin-95" target="_blank" title="zhihu"><i class="fa fa-fw fa-globe"></i>zhihu</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://www.cnblogs.com/kuangbin/" target="_blank" title="cnblogs"><i class="fa fa-fw fa-globe"></i>cnblogs</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://wpa.qq.com/msgrd?v=3&uin=1691626124&site=qq&menu=yes" target="_blank" title="QQ"><i class="fa fa-fw fa-globe"></i>QQ</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-友情链接"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.cnblogs.com/kuangbin/" title="我的博客园" target="_blank">我的博客园</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://zhiyi.live/" title="MoonChasing" target="_blank">MoonChasing</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://taowusheng.cn/" title="YIFEI" target="_blank">YIFEI</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">kuangbin</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Pisces</a> v6.3.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>












  















  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.3.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.3.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.3.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.3.0"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  

</body>
</html>
